<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>btb.fit â€“ Public Profile</title>
  <link rel="stylesheet" href="style.css">
  <!-- Diagnostic: Check DOM BEFORE Chart.js loads -->
  <script>
    // Check IMMEDIATELY when script executes (synchronous)
    console.log('ðŸ”¬ SYNC CHECK (before DOM): macros-card in document.body?', document.body ? document.body.innerHTML.includes('macros-card') : 'body not yet parsed');
    
    document.addEventListener('DOMContentLoaded', () => {
      console.log('ðŸ”¬ BEFORE CHART.JS CHECK: macros-card exists?', !!document.getElementById('macros-card'));
      console.log('ðŸ”¬ BEFORE CHART.JS: body HTML includes "macros-card"?', document.body.innerHTML.includes('macros-card'));
      
      // List ALL card IDs found
      const allCards = document.querySelectorAll('.card');
      const cardIds = Array.from(allCards).map(card => card.id || card.className);
      console.log('ðŸ”¬ ALL CARDS FOUND:', cardIds);
    });
  </script>
  <!-- Chart.js for graphs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <!-- Diagnostic: Check DOM AFTER Chart.js loads -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      console.log('ðŸ”¬ AFTER CHART.JS CHECK: macros-card exists?', !!document.getElementById('macros-card'));
    });
  </script>
</head>
<body>
  <div class="app">
    <header>
      <div class="logo-container">
        <img src="assets/logo.png" alt="BTB Logo" class="logo-img" id="secret-admin-link" style="cursor: pointer;" title="btb.fit">
        <div class="brand">
          <span class="brand-name">btb<span class="dot">.fit</span></span>
          <span class="brand-tag">Body Tracking Benchmark</span>
        </div>
      </div>
      <div class="user-bar">
        <span id="profile-user"></span>
      </div>
    </header>
    <main>
      <div class="charts-grid">
        <!-- Row 1 -->
        <div class="card silhouette-card" id="silhouette-card">
          <h2>User silhouette</h2>
          <div class="silhouette-wrapper">
            <img id="profile-silhouette" class="silhouette-img" src="assets/male_silhouette_black.png" alt="Silhouette">
            <div class="silhouette-info">
              <p><strong>BMI:</strong> <span id="profile-bmi">â€“</span></p>
              <p><strong>Status:</strong> <span id="profile-status">â€“</span></p>
            </div>
          </div>
        </div>

        <div class="card" id="bmi-card">
          <h2>BMI Over Time</h2>
          <canvas id="profile-bmi-chart"></canvas>
        </div>
        
        <!-- Row 2 -->
        <div class="card" id="progress-card">
          <h2>Progress over time</h2>
          <canvas id="profile-chart"></canvas>
        </div>
        
        <div class="card" id="athletic-card">
          <h2>Athleticism Score</h2>
          <canvas id="profile-athletic-chart"></canvas>
        </div>
        
        <!-- Row 3 -->
        <div class="card" id="water-card">
          <h2>Water Intake</h2>
          <canvas id="profile-water-chart"></canvas>
        </div>
        
        <div class="card" id="macros-card">
          <h2>Daily Macros</h2>
          <canvas id="public-macros-chart"></canvas>
        </div>
        
        <!-- Row 4 -->
        <div class="card" id="body-comp-card">
          <h2>Body Composition</h2>
          <canvas id="public-body-comp-chart"></canvas>
        </div>
        
        <div class="card" id="projections-module">
          <h2>Weight Projections</h2>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-top: 16px;">
            <div>
              <p style="font-size: 12px; color: #9aa8c7;">7 Days</p>
              <p id="public-proj-7" style="font-size: 20px; font-weight: 600; color: #34e27c;">â€“</p>
              <p id="public-proj-change-7" style="font-size: 14px;"></p>
            </div>
            <div>
              <p style="font-size: 12px; color: #9aa8c7;">15 Days</p>
              <p id="public-proj-15" style="font-size: 20px; font-weight: 600; color: #34e27c;">â€“</p>
              <p id="public-proj-change-15" style="font-size: 14px;"></p>
            </div>
            <div>
              <p style="font-size: 12px; color: #9aa8c7;">30 Days</p>
              <p id="public-proj-30" style="font-size: 20px; font-weight: 600; color: #34e27c;">â€“</p>
              <p id="public-proj-change-30" style="font-size: 14px;"></p>
            </div>
            <div>
              <p style="font-size: 12px; color: #9aa8c7;">180 Days</p>
              <p id="public-proj-180" style="font-size: 20px; font-weight: 600; color: #34e27c;">â€“</p>
              <p id="public-proj-change-180" style="font-size: 14px;"></p>
            </div>
          </div>
        </div>

        <!-- Row 5: New Cards -->
        <div class="card" id="caloric-balance-card">
          <h2>Caloric Balance</h2>
          <canvas id="caloric-balance-chart"></canvas>
        </div>

        <div class="card" id="strength-weight-card">
          <h2>Strength-to-Weight Ratio</h2>
          <canvas id="strength-weight-chart"></canvas>
        </div>

        <!-- Row 6 -->
        <div class="card" id="recomposition-card">
          <h2>Body Recomposition</h2>
          <canvas id="recomposition-chart"></canvas>
        </div>

        <div class="card" id="consistency-card">
          <h2>Consistency Tracker</h2>
          <div style="padding: 20px;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-bottom: 20px;">
              <div style="text-align: center;">
                <div style="font-size: 14px; color: #9aa8c7; margin-bottom: 8px;">Current Streak</div>
                <div id="current-streak" style="font-size: 32px; font-weight: bold; color: #34e27c;">0</div>
                <div style="font-size: 12px; color: #9aa8c7;">days</div>
              </div>
              <div style="text-align: center;">
                <div style="font-size: 14px; color: #9aa8c7; margin-bottom: 8px;">Longest Streak</div>
                <div id="longest-streak" style="font-size: 32px; font-weight: bold; color: #1ac0ff;">0</div>
                <div style="font-size: 12px; color: #9aa8c7;">days</div>
              </div>
              <div style="text-align: center;">
                <div style="font-size: 14px; color: #9aa8c7; margin-bottom: 8px;">Completion Rate</div>
                <div id="completion-rate" style="font-size: 32px; font-weight: bold; color: #ffda6a;">0%</div>
                <div style="font-size: 12px; color: #9aa8c7;">last 30 days</div>
              </div>
            </div>
            <canvas id="consistency-chart" style="max-height: 150px;"></canvas>
          </div>
        </div>

        <!-- Row 7 -->
        <div class="card" id="bone-bmr-card">
          <h2>Bone Density & BMR</h2>
          <canvas id="bone-bmr-chart"></canvas>
        </div>
      </div>
    </main>
  </div>

  <script src="public-profile.js?v=9"></script>
</body>
</html>